<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Einzahl App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <header class="header">
    <div class="container header-inner">
      <img src="Logo.png" alt="Automatenservice Logo" class="logo">
      <div class="header-title">Automatenservice Schiemann & Automatenservice Albrecht</div>
    </div>
  </header>

  <main class="container">

    <section id="pinSection" class="card">
      <h2>Anmeldung</h2>
      <label for="pinInput">PIN</label>
      <input type="password" id="pinInput">
      <button type="button" onclick="verifyPin()">Anmelden</button>
      <div id="pinStatus" class="status"></div>
    </section>

    <section id="appSection" class="card" style="display:none">
      <div class="tabs">
        <button id="tabEinzahlung" class="tab active" type="button" onclick="showTab('einzahlung')">Einzahlung</button>
        <button id="tabAuswertung" class="tab" type="button" onclick="showTab('auswertung')">Zusammenfassung</button>
      </div>

      <div id="viewEinzahlung">

        <div class="subcard">
          <h2>Auswahl</h2>
          <label for="centerSelect">Center</label>
          <select id="centerSelect"></select>
          <label for="automatSelect">Automat</label>
          <select id="automatSelect"></select>
          <div id="bestandBox" class="box"></div>
        </div>

        <div id="einzahlSection" class="subcard" style="display:none">
          <h2>Entnahme</h2>

          <label for="scheineSumme">Scheine (â‚¬)</label>
          <input id="scheineSumme" type="number">

          <label for="muenzenSumme">MÃ¼nzen gesamt (â‚¬)</label>
          <input id="muenzenSumme" type="number">

          <label for="einEuroEntnommen">Entnommene 1â‚¬ MÃ¼nzen (â‚¬)</label>
          <input id="einEuroEntnommen" type="number">

          <label for="fotoBestand"><b>ðŸ“¸ Bestandsfoto (Pflicht)</b></label>
          <input id="fotoBestand" type="file" accept="image/*" capture="environment">
          <small>Bitte zuerst ein Foto vom Bestand machen oder auswÃ¤hlen, dann MÃ¼nzen hinzurechnen und eingeben.</small>
          <img id="previewBestand" class="photo-preview">

          <h2>Wechsler</h2>
          <label for="wechslerEinEuroAlt">1â‚¬ Bestand im Wechsler (NEU â€“ eingeben)</label>
          <input id="wechslerEinEuroAlt" type="number">

          <button id="btnSave" type="button" onclick="submitEinzahlung()">âž• Automat speichern</button>
          <div id="saveStatus" class="status"></div>
        </div>

      </div>

      <div id="viewAuswertung" style="display:none">
        <div class="subcard">
          <h2>Zusammenfassung</h2>
          <div id="auswertungStatus" class="status"></div>
        </div>

        <div class="subcard">
          <div id="auswertungList" class="list"></div>
        </div>

        <div class="subcard">
          <h2>Belege</h2>

          <div class="photo-grid">
            <div class="photo-item">
              <label for="fotoBeleg1">Einzahlbeleg Foto 1 (Pflicht)</label>
              <input id="fotoBeleg1" type="file" accept="image/*" capture="environment">
              <img id="previewBeleg1" class="photo-preview">
            </div>

            <div class="photo-item">
              <label for="fotoBeleg2">Einzahlbeleg Foto 2 (optional)</label>
              <input id="fotoBeleg2" type="file" accept="image/*" capture="environment">
              <img id="previewBeleg2" class="photo-preview">
            </div>
          </div>

          <button type="button" onclick="submitEinzahlung()">ðŸ’¾ AbschlieÃŸen</button>
        </div>
      </div>
    </section>
  </main>

  <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-storage-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBo-pt3krDP9c5AxojmWaHVqPkoqmupOvA",
      authDomain: "digitales-bordbuch.firebaseapp.com",
      projectId: "digitales-bordbuch",
      storageBucket: "digitales-bordbuch.appspot.com",
      messagingSenderId: "612073997080",
      appId: "1:612073997080:web:762a85694716da8f84546d"
    };
    if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
    window.storage = firebase.storage();
    window.db = firebase.firestore();
  </script>

  <script src="app.js"></script>
</body>
</html>
